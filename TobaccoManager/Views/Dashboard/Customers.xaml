<Page x:Class="TobaccoManager.Views.Dashboard.Customers"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:local="clr-namespace:TobaccoManager.Views.Dashboard"
      mc:Ignorable="d" 
      Background="white"
      d:DesignHeight="450" d:DesignWidth="800"
      Title="Customers">

    <StackPanel Margin="20,40,20,20">

        <!--  -->
        <Grid Margin="10,10,10,20">
            <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <!-- 1. Left: Title -->
            <TextBlock Text="Customer list"
                   FontSize="18"
                   FontWeight="Bold"
                   Grid.Column="0"/>

            <!-- 2. Center: Search Box -->
            <TextBox x:Name="SearchBox"
                 VerticalAlignment="Center"
                 HorizontalAlignment="Center"
                 TextChanged="SearchBox_TextChanged"
                 Grid.Column="1" MinWidth="300"/>

            <!-- 3. Right: Add Customer Button -->
            <Button Content="Add Customer"
                Width="120"
                VerticalAlignment="Center"
                HorizontalAlignment="Right"
                Click="AddCustomerButton_Click"
                Grid.Column="2"/>
        </Grid>

        <!-- Customer List & Quota Agreements -->
        <DataGrid x:Name="CustomerGrid"
                AutoGenerateColumns="False"
                SelectionMode="Single"
                IsReadOnly="True"
                Margin="0,0,10,0"
                MouseDoubleClick="CustomerGrid_MouseDoubleClick"
                VerticalAlignment="Center">

            <DataGrid.Columns>
                <DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="Auto" />
                <DataGridTextColumn Header="Name" Binding="{Binding Name}" Width="2*" />
                <DataGridTextColumn Header="Phone" Binding="{Binding Phone}" Width="*" />
                <DataGridTextColumn Header="Address" Binding="{Binding Address}" Width="2*" />

                <!-- Quota Agreement Columns -->
                <DataGridTextColumn Header="Agreement ID" Binding="{Binding AgreementIdDisplay}" Width="Auto"/>
                <DataGridTextColumn Header="Max Quota (kg)" Binding="{Binding QuotaDisplay}" Width="Auto"/>
                <DataGridTextColumn Header="Start Date" Binding="{Binding StartDateDisplay}" Width="Auto"/>
                <DataGridTextColumn Header="End Date" Binding="{Binding EndDateDisplay}" Width="Auto"/>
                <DataGridTextColumn Header="Status" Binding="{Binding StatusDisplay}" Width="Auto"/>

                <DataGridTemplateColumn Header="Actions" Width="120">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal">
                                <Button Content="Edit" Margin="0,0,5,0" Click="EditCustomer_Click"/>
                                <Button Content="Delete" Click="DeleteCustomer_Click"/>
                            </StackPanel>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>

    </StackPanel>
</Page>
